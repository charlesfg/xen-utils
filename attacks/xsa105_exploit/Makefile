ASM_CC = nasm
CC = gcc
CFLAGS = -Wall
LDFLAGS = -lpthread
TARGET = xsa-105-exploit

all: $(TARGET)

$(TARGET): xsa-105-exploit.o threads.o
	$(CC) $^ $(LDFLAGS) -o $@

threads.o: threads.asm
	$(ASM_CC) $< -f elf64 -o $@

clean:
	rm -rf $(TARGET) *.o
